<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>暖心祝福</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- 配置Tailwind自定义颜色和字体 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF6B8B',
            secondary: '#FF8FB1',
            accent: '#A78BFA',
            light: '#FFF0F5',
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .popup-shadow {
        box-shadow: 0 4px 20px rgba(255, 107, 139, 0.3);
      }
      .btn-hover {
        @apply transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95;
      }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-light to-white min-h-screen font-inter flex flex-col items-center justify-center p-4 overflow-hidden">
  <!-- 页面标题 -->
  <h1 class="text-[clamp(1.8rem,5vw,3rem)] font-bold text-primary mb-8 text-center">暖心祝福</h1>
  
  <!-- 主按钮 -->
  <button id="startBtn" class="bg-primary hover:bg-secondary text-white px-8 py-4 rounded-full text-lg font-medium btn-hover flex items-center gap-2">
    <i class="fa fa-heart"></i>
    <span>发送祝福</span>
  </button>
  
  <!-- 弹窗容器 -->
  <div id="popupContainer" class="fixed inset-0 pointer-events-none z-50"></div>

  <script>
    // 关心的话语集合
    const caringMessages = [
      "照顾好自己呀",
      "记得多喝水哦",
      "今天也要开心呀",
      "你真的很棒",
      "别太累了，休息一下吧",
      "一切都会好起来的",
      "我在这里支持你",
      "你值得被温柔对待",
      "好好吃饭，好好睡觉",
      "你的努力我都看在眼里",
      "累了就停下来喘口气",
      "你笑起来真好看",
      "别给自己太大压力",
      "每天都要给自己一点甜",
      "你是独一无二的",
      "保持好心情最重要",
      "记得给自己放个假",
      "我相信你能做到",
      "天冷了，注意保暖",
      "慢慢来，不着急"
    ];
    
    // 颜色集合
    const colors = [
      'bg-primary/90', 'bg-secondary/90', 'bg-accent/90',
      'bg-pink-400/90', 'bg-purple-400/90', 'bg-rose-400/90'
    ];
    
    const startBtn = document.getElementById('startBtn');
    const popupContainer = document.getElementById('popupContainer');
    let popups = [];
    let isAnimating = false;
    
    // 随机数生成函数
    function random(min, max) {
      return Math.random() * (max - min) + min;
    }
    
    // 创建弹窗
    function createPopup() {
      const popup = document.createElement('div');
      const message = caringMessages[Math.floor(Math.random() * caringMessages.length)];
      const color = colors[Math.floor(Math.random() * colors.length)];
      
      // 随机大小和位置
      const size = Math.floor(random(60, 120));
      const left = random(0, window.innerWidth - size);
      const top = random(0, window.innerHeight - size);
      const rotation = random(-15, 15);
      
      popup.className = `absolute rounded-lg p-3 text-white popup-shadow transition-all duration-500 ease-out pointer-events-auto ${color}`;
      popup.style.width = `${size}px`;
      popup.style.height = `auto`;
      popup.style.left = `${left}px`;
      popup.style.top = `${top}px`;
      popup.style.transform = `rotate(${rotation}deg)`;
      popup.style.opacity = '0';
      popup.textContent = message;
      
      popupContainer.appendChild(popup);
      
      // 淡入动画
      setTimeout(() => {
        popup.style.opacity = '1';
      }, 50);
      
      return popup;
    }
    
    // 生成爱心形状的点
    function generateHeartPoints(count) {
      const points = [];
      const centerX = window.innerWidth / 2;
      const centerY = window.innerHeight / 2;
      // 根据屏幕大小调整爱心尺寸
      const scale = Math.min(window.innerWidth, window.innerHeight) * 0.4;
      
      for (let i = 0; i < count; i++) {
        // 使用爱心曲线参数方程
        const t = (i / count) * Math.PI * 2;
        let x = 16 * Math.pow(Math.sin(t), 3);
        let y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
        
        // 调整大小和位置
        x = centerX + x * scale / 16;
        y = centerY - y * scale / 16; // 负号是因为Y轴向下
        
        points.push({x, y});
      }
      
      return points;
    }
    
    // 开始动画
    function startAnimation() {
      if (isAnimating) return;
      isAnimating = true;
      startBtn.disabled = true;
      startBtn.classList.add('opacity-70', 'cursor-not-allowed');
      
      // 清空现有弹窗
      popupContainer.innerHTML = '';
      popups = [];
      
      // 根据屏幕大小决定弹窗数量
      const popupCount = Math.floor((window.innerWidth * window.innerHeight) / 8000);
      
      // 创建弹窗
      for (let i = 0; i < popupCount; i++) {
        popups.push(createPopup());
      }
      
      // 等待弹窗显示后，开始汇聚成爱心
      setTimeout(() => {
        const heartPoints = generateHeartPoints(popups.length);
        
        popups.forEach((popup, index) => {
          const point = heartPoints[index];
          const size = popup.offsetWidth;
          
          // 计算位置，确保弹窗中心对准爱心点
          const left = point.x - size / 2;
          const top = point.y - popup.offsetHeight / 2;
          
          // 添加汇聚动画
          setTimeout(() => {
            popup.style.left = `${left}px`;
            popup.style.top = `${top}px`;
            popup.style.transform = 'rotate(0deg)';
            popup.style.transition = 'all 1.5s cubic-bezier(0.34, 1.56, 0.64, 1)';
          }, index * 10);
        });
        
        // 动画结束后重新启用按钮
        setTimeout(() => {
          isAnimating = false;
          startBtn.disabled = false;
          startBtn.classList.remove('opacity-70', 'cursor-not-allowed');
        }, popupCount * 10 + 1500);
      }, 2000);
    }
    
    // 按钮点击事件
    startBtn.addEventListener('click', startAnimation);
    
    // 窗口大小变化时重新计算
    window.addEventListener('resize', () => {
      if (isAnimating) {
        const heartPoints = generateHeartPoints(popups.length);
        
        popups.forEach((popup, index) => {
          const point = heartPoints[index];
          const size = popup.offsetWidth;
          const left = point.x - size / 2;
          const top = point.y - popup.offsetHeight / 2;
          
          popup.style.left = `${left}px`;
          popup.style.top = `${top}px`;
        });
      }
    });
  </script>
</body>
</html>
